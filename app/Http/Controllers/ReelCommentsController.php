<?php

namespace App\Http\Controllers;

use App\Models\reel_comments;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class ReelCommentsController extends Controller
{

    public function index()
    {
        
    }


    public function create()
    {
        
    }

    /**
     * Store a newly created resource in storage.
     */
    public function store(Request $request)
    {
    
        $request->validate([
            'message' => 'required', 
            'reels_id' => 'required',
        ]);

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        reel_comments::create([
            'user_id' => Auth::id(),
            'message' => $request->message,
            'reels_id' => $request->reels_id,
        ]);
        return response()->json([
            'status' => true,
            'message' => 'ØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­.',
        ], 201);
    }

    /**
     * Display the specified resource.
     */
    public function show($id)
    {
        
        $array = ['Ø¹Ù„Ù‘Ù‚ Ù‚Ø¨Ù„ Ù…Ø§ ÙŠØ³Ø¨Ù‚Ùƒ Ø§Ø¨Ù† Ø®Ø§Ù„ØªÙƒ ÙˆØ¨ØªØ¹Ø±Ù Ø£Ù†Øª Ø§Ù„Ø¨Ø§Ù‚ÙŠ ! ðŸ™ƒ'
        , 'Ø§Ù„Ù‚Ø±Ø¯ Ø¨Ø¹ÙŠÙ† Ø£Ù…Ù‡ ØºØ²Ø§Ù„ .. ÙˆØ¨Ø¹ÙŠÙ† Ù…Ø±ØªÙˆØ§ ÙƒÙŠØ³ Ù…ØµØ§Ø±ÙŠ  ðŸ™‚ðŸ™ƒ',
        'Ø²ÙˆØ¬ÙˆÙ†Ø§',
        'Ø£Ø¨ÙˆÙƒ ÙƒÙ„ ÙŠÙˆÙ… Ø¬Ù…Ø¹Ø© Ù„Ø§Ø²Ù… ÙŠØ±Ø¬Ø¹ ÙŠØ¹ÙŠØ¯ ØªØ£Ù‡ÙŠÙ„ Ø§Ù„Ø³Ø·Ø­',
        'ðŸ‘½â†’ÙˆØ£Ù†Øª Ø±Ø§ÙŠØ­ ØªØ®Ù„Øµ Ø§Ù„Ù…Ù†Ù‡Ø§Ø¬ Ø¨Ù†Øµ Ø³Ø§Ø¹Ø© , ÙØ¶Ø§Ø¦ÙŠ ÙˆÙ„Ùˆ',
        'Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ÙØ­Øµ ÙƒÙ„Ù‡Ø§ Ù…Ù† Ø§Ù„ÙƒØªØ§Ø¨ â†’ Ø¯ÙƒØªÙˆØ± Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© ðŸŒš',
        'Ø¥Ø°Ø§ Ù…Ø§ Ø¹Ù„Ù‘Ù‚Øª . Ø±Ø­ ØªØµÙŠØ± Ø§Ù„Ù‚Ø¹Ø¯Ø© ÙƒÙ„Ù‡Ø§ Ø¹Ù† Ø§Ø¨Ù† Ø®Ø§Ù„ØªÙƒ ðŸ˜¬ðŸ™ƒ',
        'Ø£Ø¨Ù† Ø®Ø§Ù„ØªÙƒ Ø¨Ø´Ùˆ Ø£Ø­Ø³Ù† Ù…Ù†Ùƒ   ',
        'Ø£Ù†Ø§ Ù…Ø§ Ù†Ø³ÙŠØª Ø§Ù„Ø¬ÙˆØ§Ø¨ .. Ù‡Ùˆ Ù†Ø³ÙŠ ÙŠØ¬ÙŠ Ø¹Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†! ðŸ™ƒ',
        'Ø¨ÙˆØ¸Ø© .. ÙƒÙ†Ø§ÙÙŠ .. Ø³Ø­Ù„Ø¨ , ÙˆØ¹Ù… ØªÙ†ØºÙ… ÙƒÙ…Ø§Ù† ðŸ™‚ Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒâ†™ï¸',
        'Ø·Ø¨ Ø§Ù„Ø¬Ø±Ù‰ Ø¹Ù„Ù‰ ØªÙ…Ø§ Ø¨ØªØ·Ù„Ø¹ Ø§Ù„Ø¨Ù†Øª Ù„Ø£Ù…Ù‡Ø§ ðŸ™ƒðŸŒš',
        'Ø®Ø§Ù†Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¹Ù†Ø§ ØµØ§Ø±Øª Ù…Ø«Ù„ Ø§Ù„Ø¯Ù‘Ø§ÙŠ Ø£Ù… Ø²ÙƒÙŠ ',
        'Ù‡ÙˆÙ† Ø³Ø§Ø­Ø© Ù†Ù‚Ø§Ø´ ... Ù…Ùˆ Ø­Ø¶Ø§Ù†Ø©ØŒ Ø§Ø­ÙƒÙŠ Ù…ØªÙ„ Ø§Ù„ÙƒØ¨Ø§Ø±. ðŸŒš',
        'Ø¹Ù„Ù‘Ù‚ Ù‚Ø¨Ù„ Ù…Ø§ ÙŠØ¹Ù„Ù‘Ù‚ÙˆÙƒ! ðŸ™ƒ',
        'Ø¨ØªÙ‡ÙˆÙ† Ù†Øµ Ø§Ù„Ø£Ù„Ù Ø®Ù…Ø³Ù…ÙŠØ©',
        'Ù„Ù… Ø£Ø¬Ø¯ Ø­Ù„ ÙŠØ­Ù„ Ù…Ø­Ù„ Ø§Ù„Ø­Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø­Ø§Ù„ØªÙŠ Ø­Ø§Ù„ÙŠØ§Ù‹ ðŸ™ƒ',
        'ÙˆØ§Ù„Ù„Ù‡ Ù„Ø¹ÙŠØ´Ùƒ Ù…Ù„ÙƒØ© ',
        'Ø£Ù†Ø§ ØªÙ…Ø§Ù…ØŒ Ø¨Ø³ ØªÙ…Ø§Ù…ÙŠ Ù…Ùˆ ØªÙ…Ø§Ù… Ø§Ù„ØªÙ…Ø§Ù…ØŒ Ù‡Ùˆ ØªÙ…Ø§Ù… Ù†Øµ Ù†Øµ! ',
        'Ø£Ù†Ø§ Ù…Ø§ Ù†Ø³ÙŠØªØŒ Ø¨Ø³ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù†Ø³ÙŠØªÙ†ÙŠ Ø¥Ù†ÙŠ Ù†Ø³ÙŠØª!',
        'Ø£Ù†Øª ØªÙÙƒØ³Ø± Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ',
        'Ù„Ø§ ØªØªØ®Ù„Ù‰ Ø¹Ù† Ø­Ù„Ù…Ùƒ... Ø®Ù„ÙŠÙƒ Ù†Ø§ÙŠÙ…!',
        'Ø¥Ø°Ø§ Ù…Ø§ Ù‚Ø¯Ø±Øª ØªØ³Ø¹Ø¯ Ø­Ø§Ù„Ùƒ... Ø¹ÙƒÙ‘Ø± Ù…Ø²Ø§Ø¬ ØºÙŠØ±Ùƒ ðŸ™ƒ',
        'Ø£Ù†Ø§ Ù…Ùˆ ÙØ§Ø´Ù„... Ø¨Ø³ Ø§Ù„Ù†Ø¬Ø§Ø­ Ù…Ùˆ Ù…Ù† Ø£ÙˆÙ„ÙˆÙŠØ§ØªÙŠ Ø­Ø§Ù„ÙŠØ§Ù‹!',
        'Ù„Ø§ ØªØ¨Ø±Ø± Ø£Ø®Ø·Ø§Ø¦Ùƒ... Ø¬Ù„Ù‘Ø·Ù‡Ù… Ø¨Ø§Ù„Ù…Ø²ÙŠØ¯!',
        'Ø¹Ù„Ø§ÙˆÙŠ Ø­Ø¨ÙŠØ¨ Ù‚Ù„Ø¨ÙŠ Ø£Ø¨Ùˆ Ø­Ø³ÙŠÙ† ðŸ˜Ž',
        'Ù„Ø§ ØªØªÙ…Ø§Ø¯Ø§ Ø®Ø¨Ø²Ùƒ Ø®Ø¨Ø² Ø§Ù„Ø¹Ø¨Ø§Ø³',
        'Ø¥Ø°Ø§ Ø¶Ø§Ù‚Øª Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø¯Ù†ÙŠØ§... ØªØ°ÙƒÙ‘Ø± Ø¥Ù†Ù‡Ø§ Ù…Ùˆ Ø¨Ù†Ø·Ù„ÙˆÙ†!',
        'Ø£Ù†Ø§ Ù…Ø´Ø§Ø¹Ø±ÙŠ ÙƒÙ„Ù‡Ø§ Ù…ÙŠØªØ© .. Ø¥Ù„Ø§ Ø§Ù„Ø¬ÙˆØ¹  ØŒ Ø´ØºÙ‘Ø§Ù„ 24 Ø³Ø§Ø¹Ø©!',
        'Ù„Ø§ ØªÙ†Ø¸Ø± Ù„Ù„Ø®Ù„Ù Ø£Ø¨Ø¯Ø§Ù‹ Ø¥Ù„Ø§ ÙˆÙ‚Øª Ø§Ù„Ø£Ù…ØªØ­Ø§Ù† ',
        'Ø§Ù„ÙƒØ³Ù„ Ù‡Ùˆ Ø£Ù… Ø§Ù„Ø¹Ø§Ø¯Ø§Øª Ø§Ù„Ø³ÙŠØ¦Ø©ØŒ ÙˆÙ„ÙƒÙ†Ù‡Ø§ Ø£Ù… ÙˆÙŠØ¬Ø¨ Ø§Ø­ØªØ±Ø§Ù…Ù‡Ø§.',
        'Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù†Ø³Ù‰ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¶ÙŠ ÙˆÙ†Ø±ØªÙƒØ¨ Ø£Ø®Ø·Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø©.',
        'Ù„Ø§ ØªÙ…Ø´Ù ÙˆØ±Ø§Ø¡ Ù‚Ù„Ø¨Ùƒ Ù„Ø£Ù† Ù‚Ù„Ø¨Ùƒ Ù„Ø§ ÙŠÙ…Ù„Ùƒ Ø£Ù‚Ø¯Ø§Ù…',
        'Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙŠ Ø´Ø¹Ø± Ø¨Ù‡Ø§ Ø¢Ø®Ø± Ø¯ÙŠÙ†Ø§ØµÙˆØ± Ù‚Ø¨Ù„ Ø§Ù†Ù‚Ø±Ø§Ø¶Ù‡.',
        'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ù†ØªØ¸Ø§Ø± Ø£Ø³ÙˆØ¡ Ù…Ù† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø£ÙƒÙ„',
        'Ø£Ù†Ø§ Ùˆ Ø§Ù„Ù†ÙˆÙ… Ù‚ØµØ© Ø­Ø¨ ØªØ¯Ù…Ø±Ù‡Ø§ Ù…Ø§Ù…Ø§ ÙƒÙ„ ØµØ¨Ø§Ø­'];
        $user=Auth::user();
        $reel_comments = reel_comments::with('user')
            ->where('reels_id', $id)
            ->get()
            ->map(function ($comment) {
            $comment->liked_by_user = $comment->likes->contains('user_id', auth()->id());
            unset($comment->likes);
            return $comment;
        });
        $randomPhrase = $array[array_rand($array)];
        return response()->json(['reel_comments' => $reel_comments ,'comment'=> $randomPhrase], 200);
    }

    public function edit(reel_comments $reel_comments)
    {
        //
    }

    public function update(Request $request, reel_comments $reel_comments)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(reel_comments $reel_comments)
    {
        //
    }
}
